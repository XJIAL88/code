webpackJsonp([4],{"5TYM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("gyMJ"),s=a("T452"),i={data:function(){return{activeIndex:"1",keyword:"",params:{search:"",pageSize:10,pageNumber:1},list:[],upload:{domain:s.b},total:0}},mounted:function(){this.fetchData(),this.$nextTick(this.renderBreadCrumbAction)},methods:{renderBreadCrumbAction:function(){var t=this;this.$createElement;this.$bus.$emit("changeBreadCrumbAction",function(e,a){return a("div",{},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.newPrize}},["新增奖品"])])})},newPrize:function(){this.$router.push({name:"prizeNew"})},fetchData:function(){var t=this;n.a.post("activityAwardGetlist",this.params).then(function(e){t.list=e.data.dataList,t.total=e.data.dataCount})},editPrize:function(t){this.$router.push({name:"prizeEdit",query:{id:t}})},doSearch:function(){this.params.search=this.keyword,this.params.pageSize=10,this.params.pageNumber=1,this.fetchData()},handleSelect:function(t){2==t&&this.$router.push({name:"resourceList"})},handlePageSizeChange:function(t){this.params.pageSize=t,this.fetchData()},handlePageNumberChange:function(t){this.params.pageNumber=t,this.fetchData()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prize-list"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"搜索资源/活动名称或id","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.doSearch(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("奖品列表")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("资源列表")])],1),t._v(" "),a("div",{staticClass:"prize-table"},[a("el-row",{staticClass:"table-header"},[a("el-col",{attrs:{span:3}},[t._v("资源类型")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("奖品名称")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("奖品图片")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("剩余")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v("已发放")]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("创建时间")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("操作")]),t._v(" "),a("el-col",{attrs:{span:3}})],1),t._v(" "),t._l(t.list,function(e){return a("el-row",{key:e.id,staticStyle:{"border-bottom":"1px solid #ebeef5"}},[a("div",{staticStyle:{color:"#aaa","padding-top":"12px"}},[a("span",[t._v("活动名称："+t._s(e.name))]),t._v(" "),a("span",{staticStyle:{"margin-left":"15px"}},[t._v("活动时间："+t._s(t._f("datetime")(e.startAt))+"~"+t._s(t._f("datetime")(e.endAt)))]),t._v(" "),a("span",{staticStyle:{"margin-left":"15px"}},[t._v("活动id："+t._s(e.number))])]),t._v(" "),t._l(e.award,function(e){return a("el-row",{key:e.id,staticClass:"table-content"},[a("el-col",{attrs:{span:3}},[t._v(t._s(e.categoryName)+" ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(e.name))]),t._v(" "),a("el-col",{attrs:{span:3}},[a("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.upload.domain+e.image}})]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(e.awardNumber-e.usedNumber))]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(e.usedNumber))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v(t._s(t._f("datetime")(e.createAt)))]),t._v(" "),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"operation-btn",staticStyle:{"margin-left":"15px"},on:{click:function(a){t.editPrize(e.id)}}},[a("i",{staticClass:"iconfont icon-bianji"})])])],1)})],2)})],2),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{staticClass:"page-list-pagination",attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper",currentPage:t.params.pageNumber,"page-size":t.params.pageSize,total:t.total},on:{"update:currentPage":function(e){t.$set(t.params,"pageNumber",e)},"size-change":t.handlePageSizeChange,"current-change":t.handlePageNumberChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("uZ9l")},"data-v-ec55c53e",null);e.default=l.exports},uZ9l:function(t,e){}});
//# sourceMappingURL=4.daf82682223441ba49e3.js.map